let sep_scripts={loaded_orders:[],templates:[],construct(){jQuery(document).ready((function(){sep_scripts.set_event_listeners()}))},set_event_listeners(){jQuery("#sep-order-search").on("click",e=>{e.preventDefault(),sep_scripts.find_orders()}),jQuery("#order-section-content").on("click",".sep-order-item",e=>{let order_id=jQuery(e.currentTarget).data("order-id");sep_scripts.load_single_order(order_id)})},async find_orders(){jQuery("#order-section-content").html(__("Loading orders...","sep"));let value=jQuery("#sep-order-search-input").val(),send_data=new FormData;send_data.append("action","sep_ajax_orders"),send_data.append("do","get_orders"),send_data.append("search",value);const ajax_response=await this.load_ajax(send_data),found_orders=this.get_ajax_success_answer(ajax_response);empty(found_orders)?jQuery("#order-section-errors").append(__("Error while loading the Order","sep")+"<br/>"+this.get_ajax_error_answer(ajax_response)):(this.loaded_orders=found_orders,await sep_scripts.get_template("order-details.html","templates/backend/components/").then((function(content){if("object"==typeof found_orders){var output="<h2>"+__("Found Orders","sep")+"</h2>";jQuery.each(found_orders,(index,order)=>{output+=sep_scripts.add_templage_args(content,{order_number:order.id,name:order.billing.first_name+" "+order.billing.last_name,amount:order.total+" "+order.currency,date:order.date_created.date})})}jQuery("#order-section-content").html(output)})))},async load_single_order(order_id){this.loaded_orders.forEach((async function(order_obj){order_obj.id===order_id&&await sep_scripts.get_template("single-order.html","templates/backend/components/").then((function(content){if("object"==typeof order_obj)var output=sep_scripts.add_templage_args(content,{order_title:__("Order","sep"),name:order_obj.billing.first_name+" "+order_obj.billing.last_name});jQuery("#order-section-content").html(output)}))}))},get_ajax_success_answer(data,only_first=!0){return this.get_ajax_answer(data,"success",only_first)},get_ajax_error_answer(data,only_first=!0){return this.get_ajax_answer(data,"error",only_first)},get_ajax_error_answer(data,only_first=!0){return this.get_ajax_answer(data,"system_error",only_first)},get_ajax_answer(data,type,only_first=!0){try{var data_obj=JSON.parse(data)}catch(error){return void console.error(error)}if(void 0!==typeof data_obj[type])return only_first?data_obj[type][0]:data_obj[type]},load_ajax:async send_data=>await jQuery.ajax({url:window.ajaxurl,type:"POST",cache:!1,processData:!1,contentType:!1,data:send_data,success:function success(data){},error:function error(data){console.error(__("Failed to get a proper response from the ajax request.","sep"),data)}}),get_template:async(file,subfolder="")=>response=await jQuery.get(window.sep_plugin_dir_url+subfolder+file,(function(data,textStatus,jqxhr){})),add_templage_args:(template_string,args={})=>(jQuery.each(args,(index,value)=>{template_string=template_string.replaceAll("{{"+index+"}}",value)}),template_string)};const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;function empty(value){return null===value||(void 0===value||0===value.length)}sep_scripts.construct();